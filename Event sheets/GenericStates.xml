<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>GenericStates</name>
    <events>
        <comment>Npc Movement Code</comment>
        <event-block sid="7099736692596505">
            <conditions>
                <condition id="0" name="On function" sid="9221123024480561" type="Function">
                    <param id="0" name="Name">&quot;MoveToPOI&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="3381218935627133" type="NPC">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="3915611019873957" type="FSM">
                    <param id="0" name="Unique ID">NPC.FSM_UID</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="8955976132423636" type="NPCData">
                    <param id="0" name="Unique ID">NPC.DataUID</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="7516517543346603" type="PointsOfIntrest">
                    <param id="0" name="Unique ID">int(NPCData.Get(&quot;Target&quot;))</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="7654393755703245">
                    <conditions>
                        <condition id="3" inverted="1" name="Has key" sid="6843443133946368" type="GameStats">
                            <param id="0" name="Key">&quot;GhostWait&quot;</param>
                        </condition>
                        <condition id="3" name="Has key" sid="2723439383951281" type="NPCData">
                            <param id="0" name="Key">&quot;TriggerUID&quot;</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="2541659634093008" type="TriggerZone">
                            <param id="0" name="Unique ID">NPCData.Get(&quot;TriggerUID&quot;)</param>
                        </condition>
                        <condition id="1" inverted="1" name="Is overlapping another object" sid="6321611749228315" type="BASE">
                            <param id="0" name="Object">TriggerZone</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="2909650054786944" type="Function">
                            <param id="0" name="Name">&quot;PopState&quot;</param>
                            <param id="1" name="Parameter {n}">NPC.UID</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="435622022558282">
                    <conditions>
                        <condition id="-22" name="Else" sid="9099529988651575" type="System" />
                        <condition id="-8" name="Compare two values" sid="6997417491611368" type="System">
                            <param id="0" name="First value">distance(PointsOfIntrest.X, PointsOfIntrest.Y, NPC.X, NPC.Y)</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Second value">8</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="8477150815528451" type="Function">
                            <param id="0" name="Name">&quot;PopState&quot;</param>
                            <param id="1" name="Parameter {n}">NPC.UID</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="9994252703852096">
                    <conditions>
                        <condition id="-22" name="Else" sid="6170942785887325" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="CustomMovement" id="4" name="Accelerate toward angle" sid="526487126102191" type="NPC">
                            <param id="0" name="Acceleration">64</param>
                            <param id="1" name="Angle">angle(NPC.X,NPC.Y, PointsOfIntrest.X,PointsOfIntrest.Y)</param>
                        </action>
                        <action behavior="CustomMovement" id="2" name="Set speed" sid="9164007345822021" type="NPC">
                            <param id="0" name="Which">0</param>
                            <param id="1" name="Speed">clamp(NPC.CustomMovement.Speed,0,distance(PointsOfIntrest.X,PointsOfIntrest.Y,NPC.X,npc.Y))</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
    </events>
</c2eventsheet>
